name: ddev-selenium-standalone-chrome

project_files:
- docker-compose.selenium-chrome.yaml
- config.selenium-standalone-chrome.yaml

ddev_version_constraint: '>= v1.24.10'

post_install_actions:
  - |
    #ddev-description:Checking for obsolete docker-compose.selenium-chrome_extras.yaml
    file="$DDEV_APPROOT/.ddev/docker-compose.selenium-chrome_extras.yaml"
    if [ -f "$file" ]; then
      if grep -q '#ddev-generated' "$file"; then
        echo "Removing existing docker-compose.selenium-chrome_extras.yaml, it's not needed anymore."
        rm -f "$file"
      else
        echo "Unwilling to remove '$file' because it does not have #ddev-generated in it; please remove it manually."
        exit 1
      fi
    fi
